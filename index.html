<!DOCTYPE html>
<!--
    Chatooly Tool Template
    Author: Yael Renous - Studio Video

    ðŸ¤– AI AGENTS: Before modifying this file, ALWAYS check:
    - https://raw.githubusercontent.com/yaelren/chatooly-cdn/main/css/variables.css
    - https://raw.githubusercontent.com/yaelren/chatooly-cdn/main/css/components.css
    - https://raw.githubusercontent.com/yaelren/chatooly-cdn/main/css/base.css
    - Ensure CDN script tag remains: https://yaelren.github.io/chatooly-cdn/js/core.min.js
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ========== EDIT THIS: Your Tool Name ========== -->
    <title>Inflatable Text - Chatooly</title>

    <!-- ========== DO NOT EDIT: Required CDN Styles ========== -->
    <link rel="stylesheet" href="https://yaelren.github.io/chatooly-cdn/css/unified.min.css">

    <!-- Google Fonts - DynaPuff Variable Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DynaPuff:wght@400..700&display=swap" rel="stylesheet">

    <style>
        /* Collapsible category styling */
        .chatooly-category {
            margin: 15px 0;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .chatooly-category summary {
            padding: 12px 15px;
            background: var(--surface-elevated);
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            user-select: none;
            transition: background 0.2s;
        }

        .chatooly-category summary:hover {
            background: var(--surface-hover);
        }

        .chatooly-category[open] summary {
            border-bottom: 1px solid var(--border-color);
        }

        .chatooly-category-content {
            padding: 15px;
        }

        .chatooly-category .chatooly-control-group:last-child {
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <!-- ========== EDIT THIS: Update header title to match your tool ========== -->
    <header class="chatooly-header">
        <div class="chatooly-header-title">Inflatable Text</div>
        <div class="chatooly-header-credit">MADE BY CHATOOLY</div>
    </header>

    <div class="chatooly-app-container">
        <!-- Left Panel: Tool Controls -->
        <div class="chatooly-controls-panel">
            <!-- ========== EDIT THIS: Tool Description ========== -->
            <div class="chatooly-controls-header">
                <p>Create inflatable 3D text and play with geometry parameters in real-time</p>
            </div>

            <div class="chatooly-controls-content">
                <!-- ========== EDIT BELOW: Add Your Tool Controls Here ========== -->

                <!-- Text Input -->
                <div class="chatooly-control-group">
                    <label for="text-input">Type Letters</label>
                    <textarea id="text-input" placeholder="Loading font..." rows="4" disabled></textarea>
                </div>

                <!-- Action Buttons -->
                <div class="chatooly-control-group">
                    <button id="replay-btn" class="chatooly-button">Replay Animation</button>
                </div>

                <div class="chatooly-control-group">
                    <button id="clear-btn" class="chatooly-button">Clear All</button>
                </div>

                <!-- Animation Settings Category -->
                <details class="chatooly-category" open>
                    <summary>Animation</summary>
                    <div class="chatooly-category-content">
                        <div class="chatooly-control-group">
                            <label for="inflation-speed">Inflation Speed</label>
                            <input type="range" id="inflation-speed" min="0.5" max="5" step="0.1" value="1.0">
                            <input type="number" id="inflation-speed-input" min="0.5" max="5" step="0.1" value="1.0">
                        </div>

                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="play-typing-animation">
                                Play Typing Animation
                            </label>
                        </div>

                        <div class="chatooly-control-group">
                            <label for="typing-speed">Typing Speed (letter delay)</label>
                            <input type="range" id="typing-speed" min="0.01" max="0.5" step="0.01" value="0.1">
                            <input type="number" id="typing-speed-input" min="0.01" max="0.5" step="0.01" value="0.1">
                        </div>

                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="squish-animation">
                                Squish Animation
                            </label>
                        </div>

                        <div class="chatooly-control-group">
                            <label for="squish-speed">Squish Speed</label>
                            <input type="range" id="squish-speed" min="0.5" max="5" step="0.1" value="1.0">
                            <input type="number" id="squish-speed-input" min="0.5" max="5" step="0.1" value="1.0">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="squish-easing">Easing</label>
                            <select id="squish-easing">
                                <option value="linear">Linear</option>
                                <option value="easeInOut" selected>Ease In-Out</option>
                                <option value="easeIn">Ease In</option>
                                <option value="easeOut">Ease Out</option>
                                <option value="bounce">Bounce</option>
                                <option value="elastic">Elastic</option>
                            </select>
                        </div>

                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="squish-ping-pong" checked>
                                Ping Pong (loop back and forth)
                            </label>
                        </div>

                        <div class="chatooly-control-group">
                            <label for="squish-width-min">Width Min Size (%)</label>
                            <input type="range" id="squish-width-min" min="20" max="100" step="5" value="50">
                            <input type="number" id="squish-width-min-input" min="20" max="100" step="5" value="50">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="squish-width-max">Width Max Size (%)</label>
                            <input type="range" id="squish-width-max" min="100" max="300" step="10" value="150">
                            <input type="number" id="squish-width-max-input" min="100" max="300" step="10" value="150">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="squish-height-min">Height Min Size (%)</label>
                            <input type="range" id="squish-height-min" min="20" max="100" step="5" value="50">
                            <input type="number" id="squish-height-min-input" min="20" max="100" step="5" value="50">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="squish-height-max">Height Max Size (%)</label>
                            <input type="range" id="squish-height-max" min="100" max="300" step="10" value="150">
                            <input type="number" id="squish-height-max-input" min="100" max="300" step="10" value="150">
                        </div>
                    </div>
                </details>

                <!-- Size Settings Category -->
                <details class="chatooly-category" open>
                    <summary>Size</summary>
                    <div class="chatooly-category-content">
                        <div class="chatooly-control-group">
                            <label for="font-size">Font Size</label>
                            <input type="range" id="font-size" min="5" max="30" step="1" value="5">
                            <input type="number" id="font-size-input" min="5" max="30" step="1" value="5">
                        </div>

                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="auto-spacing" checked>
                                Automatic Spacing
                            </label>
                        </div>

                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="random-spawn">
                                Random Spawn Position
                            </label>
                        </div>

                        <div class="chatooly-control-group">
                            <label for="letter-spacing">Letter Spacing</label>
                            <input type="range" id="letter-spacing" min="0.1" max="2" step="0.05" value="0.3">
                            <input type="number" id="letter-spacing-input" min="0.1" max="2" step="0.05" value="0.3">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="line-spacing">Line Spacing</label>
                            <input type="range" id="line-spacing" min="0.1" max="2" step="0.05" value="0.3">
                            <input type="number" id="line-spacing-input" min="0.1" max="2" step="0.05" value="0.3">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="boundary-padding">Boundary Padding</label>
                            <input type="range" id="boundary-padding" min="5" max="100" step="5" value="5">
                            <input type="number" id="boundary-padding-input" min="5" max="100" step="5" value="5">
                        </div>
                    </div>
                </details>

                <!-- Physics Settings Category -->
                <details class="chatooly-category" open>
                    <summary>Physics</summary>
                    <div class="chatooly-category-content">
                        <div class="chatooly-control-group">
                            <label for="spawn-radius">Spawn Radius</label>
                            <input type="range" id="spawn-radius" min="5" max="100" step="1" value="5">
                            <input type="number" id="spawn-radius-input" min="5" max="100" step="1" value="5">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="gravity">Gravity</label>
                            <input type="range" id="gravity" min="0" max="2" step="0.1" value="0">
                            <input type="number" id="gravity-input" min="0" max="2" step="0.1" value="0">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="bounciness">Bounciness</label>
                            <input type="range" id="bounciness" min="0" max="1" step="0.1" value="0.1">
                            <input type="number" id="bounciness-input" min="0" max="1" step="0.1" value="0.1">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="collider-size">Collider Size</label>
                            <input type="range" id="collider-size" min="0.3" max="2" step="0.1" value="0.4">
                            <input type="number" id="collider-size-input" min="0.3" max="2" step="0.1" value="0.4">
                        </div>
                    </div>
                </details>

                <!-- Letter Colors -->
                <details class="chatooly-category" open>
                    <summary>Letter Colors</summary>
                    <div class="chatooly-category-content">
                        <div id="color-palette-list">
                            <!-- Color palette items will be added here dynamically -->
                        </div>
                        <div class="chatooly-control-group">
                            <button id="add-color-btn" class="chatooly-button">Add Color</button>
                        </div>
                    </div>
                </details>

                <!-- Materials -->
                <details class="chatooly-category" open>
                    <summary>Materials</summary>
                    <div class="chatooly-category-content">
                        <div class="chatooly-control-group">
                            <label for="material-preset">Material Type</label>
                            <select id="material-preset">
                                <option value="helium-latex" selected>Helium Latex</option>
                                <option value="rubber">Rubber Balloon</option>
                                <option value="foil">Foil/Mylar</option>
                                <option value="bubble">Clear Bubble</option>
                                <option value="metallic">Metallic</option>
                            </select>
                        </div>
                    </div>
                </details>

                <!-- Background -->
                <details class="chatooly-category">
                    <summary>Background</summary>
                    <div class="chatooly-category-content">
                        <div class="chatooly-control-group">
                            <label for="bg-color">Background Color</label>
                            <input type="color" id="bg-color" value="#000000">
                        </div>

                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="transparent-bg">
                                Transparent Background
                            </label>
                        </div>

                        <div class="chatooly-control-group">
                            <label for="bg-image">Background Image</label>
                            <input type="file" id="bg-image" accept="image/*">
                        </div>

                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="use-bg-as-env">
                                Use Background as Environment Map
                            </label>
                        </div>

                        <!-- Background Image Options (shown only when image is uploaded) -->
                        <div id="bg-image-options" style="display: none;">
                            <div class="chatooly-control-group">
                                <label for="bg-fill-mode">Background Fill Mode</label>
                                <select id="bg-fill-mode">
                                    <option value="fill">Fill (may crop)</option>
                                    <option value="fit">Fit (no stretch)</option>
                                </select>
                            </div>

                            <div class="chatooly-control-group">
                                <button id="clear-bg-btn" class="chatooly-button">Clear Background Image</button>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Lighting -->
                <details class="chatooly-category">
                    <summary>Lighting</summary>
                    <div class="chatooly-category-content">
                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="light-follows-mouse">
                                Light Follows Mouse
                            </label>
                        </div>


                        <!-- Ambient Light -->
                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="ambient-enabled" checked>
                                Ambient Light
                            </label>
                        </div>
                        <div class="chatooly-control-group">
                            <label for="ambient-intensity">Intensity</label>
                            <input type="range" id="ambient-intensity" min="0" max="2" step="0.1" value="0.6">
                            <input type="number" id="ambient-intensity-input" min="0" max="2" step="0.1" value="0.6">
                        </div>

                        <!-- Main Light -->
                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="main-light-enabled" checked>
                                Main Light (Key)
                            </label>
                        </div>
                        <div class="chatooly-control-group">
                            <label for="main-light-intensity">Intensity</label>
                            <input type="range" id="main-light-intensity" min="0" max="3" step="0.1" value="1.2">
                            <input type="number" id="main-light-intensity-input" min="0" max="3" step="0.1" value="1.2">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="main-light-x">Position X</label>
                            <input type="range" id="main-light-x" min="-30" max="30" step="1" value="10">
                            <input type="number" id="main-light-x-input" min="-30" max="30" step="1" value="10">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="main-light-y">Position Y</label>
                            <input type="range" id="main-light-y" min="-30" max="30" step="1" value="20">
                            <input type="number" id="main-light-y-input" min="-30" max="30" step="1" value="20">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="main-light-z">Position Z</label>
                            <input type="range" id="main-light-z" min="-30" max="30" step="1" value="10">
                            <input type="number" id="main-light-z-input" min="-30" max="30" step="1" value="10">
                        </div>

                        <!-- Fill Light -->
                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="fill-light-enabled" checked>
                                Fill Light
                            </label>
                        </div>
                        <div class="chatooly-control-group">
                            <label for="fill-light-intensity">Intensity</label>
                            <input type="range" id="fill-light-intensity" min="0" max="2" step="0.1" value="0.4">
                            <input type="number" id="fill-light-intensity-input" min="0" max="2" step="0.1" value="0.4">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="fill-light-x">Position X</label>
                            <input type="range" id="fill-light-x" min="-30" max="30" step="1" value="-10">
                            <input type="number" id="fill-light-x-input" min="-30" max="30" step="1" value="-10">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="fill-light-y">Position Y</label>
                            <input type="range" id="fill-light-y" min="-30" max="30" step="1" value="5">
                            <input type="number" id="fill-light-y-input" min="-30" max="30" step="1" value="5">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="fill-light-z">Position Z</label>
                            <input type="range" id="fill-light-z" min="-30" max="30" step="1" value="-5">
                            <input type="number" id="fill-light-z-input" min="-30" max="30" step="1" value="-5">
                        </div>

                        <!-- Rim Light -->
                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="rim-light-enabled" checked>
                                Rim Light (Back)
                            </label>
                        </div>
                        <div class="chatooly-control-group">
                            <label for="rim-light-intensity">Intensity</label>
                            <input type="range" id="rim-light-intensity" min="0" max="1" step="0.05" value="0.1">
                            <input type="number" id="rim-light-intensity-input" min="0" max="1" step="0.05" value="0.1">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="rim-light-x">Position X</label>
                            <input type="range" id="rim-light-x" min="-30" max="30" step="1" value="-5">
                            <input type="number" id="rim-light-x-input" min="-30" max="30" step="1" value="-5">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="rim-light-y">Position Y</label>
                            <input type="range" id="rim-light-y" min="-30" max="30" step="1" value="10">
                            <input type="number" id="rim-light-y-input" min="-30" max="30" step="1" value="10">
                        </div>
                        <div class="chatooly-control-group">
                            <label for="rim-light-z">Position Z</label>
                            <input type="range" id="rim-light-z" min="-30" max="30" step="1" value="-15">
                            <input type="number" id="rim-light-z-input" min="-30" max="30" step="1" value="-15">
                        </div>
                    </div>
                </details>

                <!-- Debug Options -->
                <details class="chatooly-category">
                    <summary>Debug</summary>
                    <div class="chatooly-category-content">
                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="show-bounding-box" checked>
                                Show Bounding Box
                            </label>
                        </div>

                        <div class="chatooly-control-group">
                            <label>
                                <input type="checkbox" id="use-bounding-box-size">
                                Use Custom Bounding Box Size
                            </label>
                        </div>

                        <div class="chatooly-control-group">
                            <label for="bounding-box-width">Bounding Box Width</label>
                            <input type="range" id="bounding-box-width" min="10" max="200" step="5" value="50">
                            <input type="number" id="bounding-box-width-input" min="10" max="200" step="5" value="50">
                        </div>

                        <div class="chatooly-control-group">
                            <label for="bounding-box-height">Bounding Box Height</label>
                            <input type="range" id="bounding-box-height" min="10" max="200" step="5" value="40">
                            <input type="number" id="bounding-box-height-input" min="10" max="200" step="5" value="40">
                        </div>
                    </div>
                </details>


                <!-- ========== END EDIT SECTION ========== -->
            </div>
        </div>

        <!-- Right Panel: Preview/Canvas Area -->
        <div class="chatooly-preview-panel">
            <!-- ========== DO NOT EDIT: Required Export Container ========== -->
            <div id="chatooly-container">
                <!-- ========== EDIT BELOW: Add Your Visual Output Here ========== -->
                <!-- This content will be exported as PNG/Video -->
                <!-- IMPORTANT: Your main canvas MUST have id="chatooly-canvas" -->
                <!-- For animations: CDN automatically detects canvas animations and provides video export options -->
                <canvas id="chatooly-canvas"></canvas>
                <!-- ========== END EDIT SECTION ========== -->
            </div>
        </div>
    </div>

    <!-- ========== THREE.JS LIBRARIES ========== -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/FontLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/geometries/TextGeometry.js"></script>

    <!-- ========== OPENTYPE.JS FOR CUSTOM FONTS ========== -->
    <script src="https://cdn.jsdelivr.net/npm/opentype.js@1.3.4/dist/opentype.min.js"></script>

    <!-- ========== DO NOT EDIT: Chatooly CDN v2.0 Integration ========== -->
    <!-- This script automatically provides: Dark theme styling + Static/Video export functionality -->
    <!-- Video support: Detects p5.js, Three.js, Canvas animations and provides MediaRecorder API export -->
    <script src="https://yaelren.github.io/chatooly-cdn/js/core.min.js"></script>

    <!-- ========== DO NOT EDIT: Chatooly Configuration ========== -->
    <script src="js/chatooly-config.js"></script>

    <!-- ========== DO NOT EDIT: Your Tool Logic ========== -->
    <script src="js/lighting.js"></script>
    <script src="js/materials.js"></script>
    <script src="js/main.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>
